<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.4: http://docutils.sourceforge.net/" />
<title>Lecture 9 -- MIME types and more</title>
<style type="text/css">

/*
:Author: David Goodger
:Contact: goodger@users.sourceforge.net
:Date: $Date: 2005-12-18 01:56:14 +0100 (Sun, 18 Dec 2005) $
:Revision: $Revision: 4224 $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin-left: 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left {
  clear: left }

img.align-right {
  clear: right }

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font-family: serif ;
  font-size: 100% }

pre.literal-block, pre.doctest-block {
  margin-left: 2em ;
  margin-right: 2em ;
  background-color: #eeeeee }

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

tt.docutils {
  background-color: #eeeeee }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document" id="lecture-9-mime-types-and-more">
<h1 class="title">Lecture 9 -- MIME types and more</h1>
<p>October 27th, 2009.</p>
<div class="section">
<h1><a id="some-design-considerations-encapsulation" name="some-design-considerations-encapsulation">Some design considerations: encapsulation</a></h1>
<p>Look at the WSGI stack.</p>
<p>The WSGI server talks to the WSGI application object.  The application
object doesn't know anything about the socket, or the HTTP request, or
anything like that -- it just knows what URL was requested, what query
string or POST content was passed in, and the headers.</p>
<p>Why isn't all of this information available to all of the code in the
webserve module, as module globals? Why can't the application object
talk directly to the socket?</p>
<p>The whole point of abstractions and separation of concerns is
encapsulation: you're trying to neatly put things into little black
boxes with known inputs and outputs so you can stop thinking about
them.</p>
<p>And why do this?</p>
<p>Crossing boundaries of abstractions: bad.  This reduces encapsulation
=&gt; makes parallelization, testing hard, reduces reliability, etc.
Global or cross-module dependencies should be minimized:
inderdependencies =&gt; complexity =&gt; bad.</p>
<p>Running multiple servers, and multiple WSGI apps, at the same time,
requires good encapsulation (or at least it does if you're sane).</p>
</div>
<div class="section">
<h1><a id="non-blocking-tests-for-hw-7" name="non-blocking-tests-for-hw-7">Non-blocking tests for HW #7</a></h1>
<p>What do the non-blocking tests for HW #7 really test?</p>
<p>Server.handle_connection only, not Server.serve_forever!</p>
<p>(yep, tests encapsulation!)</p>
</div>
<div class="section">
<h1><a id="testing-code-branches" name="testing-code-branches">Testing: code branches</a></h1>
<p>What tests should you write for HW #7?</p>
<p>Make sure all if/else branches &quot;work&quot; when entered.  What does &quot;work&quot;
mean?  You tell me in your tests.  Your tests will <em>definitely</em> need
to execute all branches.</p>
<p>You can test at the socket level OR at the app level.</p>
<p>How many branches are there here?</p>
<pre class="literal-block">
if a:
  print 'hello'

print 'goodbye'
</pre>
</div>
<div class="section">
<h1><a id="html-css-and-javascript-a-brief-introduction" name="html-css-and-javascript-a-brief-introduction">HTML, CSS, and JavaScript: a brief introduction</a></h1>
<p>HTML: all the squiggly brackets.  Specifies content and other resources
to load -- including CSS and JavaScript.  HTML is pretty standardized.</p>
<p>CSS, &quot;cascading style sheets&quot;: modifies the display properties of
HTML.  Looks something like this:</p>
<pre class="literal-block">
body {
  font-family:arial, verdana, helvetica, sans-serif;
  font-size:12px;
  color:#AAAAAA;
  background-color:#FFFFFF
}
</pre>
<p>i.e. lots of squiggly brackets.  We will discuss in more detail on
Thursday.  CSS is interestingly broken in various browsers but we'll
only be working on it within Firefox.</p>
<p>JavaScript, a programming language built into the browser.  JS has
access to data loaded into the browser and can also direct the loading
of data from the originating Web site.  JavaScript is where the majority
of interesting new Web behavior is being developed.</p>
<p>AJAX, Asynchronous JAvascript+Xml builds on top of JavaScript to provide
loading of data from the originating Web site.  It lets you incrementally
load or access large data sets.</p>
<p>We'll be talking about JS and AJAX next week and thereafter.</p>
<p>JS and AJAX are reasonably standardized, and we'll be using the jQuery
library to provide a compatibility layer between your code and the
browser.</p>
</div>
<div class="section">
<h1><a id="mime-types-and-images" name="mime-types-and-images">MIME types (and images)</a></h1>
<p>Content-Type headers emitted by server tell client how to interpret the
data:</p>
<pre class="literal-block">
text/html
image/jpeg
text/plain
</pre>
<p>But how does the server know what content type to choose for each page?</p>
<p>Answer: it's up to the server. For static files, here's a lookup table
based on extension; c.f. Apache and IIS Web servers, MIME types...
You have to implement this yourself.</p>
</div>
<div class="section">
<h1><a id="more-duck-typing-lists-dicts-and-iterables" name="more-duck-typing-lists-dicts-and-iterables">More duck typing: lists, dicts, and iterables</a></h1>
<p>duck typing/iterables</p>
<p>Special methods on classes:</p>
<blockquote>
<ul class="simple">
<li>making it look like a list: <tt class="docutils literal"><span class="pre">__getitem__(n)</span></tt> and <tt class="docutils literal"><span class="pre">__len__()</span></tt></li>
<li>making it look like a dict: <tt class="docutils literal"><span class="pre">__getitem__(k)</span></tt> and <tt class="docutils literal"><span class="pre">keys()</span></tt>.</li>
<li>more general 'iterables': <tt class="docutils literal"><span class="pre">__iter__()</span></tt> and <tt class="docutils literal"><span class="pre">next()</span></tt></li>
</ul>
</blockquote>
<p>The idea is that you can use these to dynamically calculate list elements,
rather than pre-calculating them.</p>
</div>
</div>
</body>
</html>
