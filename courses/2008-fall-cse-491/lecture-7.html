<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.4: http://docutils.sourceforge.net/" />
<title>Lecture 7 Outline / October 7th, 2008</title>
<style type="text/css">

/*
:Author: David Goodger
:Contact: goodger@users.sourceforge.net
:Date: $Date: 2005-12-18 01:56:14 +0100 (Sun, 18 Dec 2005) $
:Revision: $Revision: 4224 $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin-left: 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left {
  clear: left }

img.align-right {
  clear: right }

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font-family: serif ;
  font-size: 100% }

pre.literal-block, pre.doctest-block {
  margin-left: 2em ;
  margin-right: 2em ;
  background-color: #eeeeee }

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

tt.docutils {
  background-color: #eeeeee }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document" id="lecture-7-outline-october-7th-2008">
<h1 class="title">Lecture 7 Outline / October 7th, 2008</h1>
<p>On software development:</p>
<blockquote>
Good, Fast, Cheap. Pick two.</blockquote>
<p>-- Attributed to many, including Larry Wall (creator of Perl).</p>
<div class="section">
<h1><a id="homework-5-and-more" name="homework-5-and-more">Homework 5 and more</a></h1>
<p>Mailing list archives are here:</p>
<pre class="literal-block">
http://lists.idyll.org/pipermail/cse491-fall-2008/
</pre>
<p>In the future, I will make a functioning Web server available for all
but the JavaScript homeworks :).</p>
<p>HW 5 format is the format that most future homeworks will be in: tests
that must be satisfied and that will strive to be thorough...</p>
<p>&quot;Test Driven Development&quot; -- someone (you? partner?) writes the tests,
you fill in the code.</p>
<p><strong>Code to pass the tests, one by one.</strong></p>
<p>Writing the tests is the difficult part, but they can reflect an
incomplete requirement and then be iteratively refined (see HW 7 vs HW
6 vs HW 5).</p>
<p>Significant part of HW #7 is refining code from HW #5 to pass my new,
stricter tests.  It may not be a bad idea to do <em>easy</em> HW #6 and
work a bit on HW #7... hint hint.</p>
<p>I will try to write the tests so that if your tests pass, your code is
correct.  This is hard to do, and some &quot;smoke testing&quot; is a good idea
on your part.</p>
<p>Each independent test will generally test one &quot;feature&quot;; granularity
of the feature tells you what kind of test it is.  For example, &quot;unit
tests&quot; are as simple as you can get; &quot;functional tests&quot; are more
complicated; etc.</p>
<p>Also, <strong>code review</strong> -- ask someone else in the class, NOT someone
with whom you wrote your code, to quickly review your code; walk them
through it.</p>
<p>(Do I need to say: start early?)</p>
<div class="section">
<h2><a id="refactoring-code-iterative-refinement-to-pass-the-tests" name="refactoring-code-iterative-refinement-to-pass-the-tests">Refactoring code: iterative refinement to pass the tests</a></h2>
<p>Pick one test (simplest?) to pass.</p>
<p>Rewrite code so at least that test passes.</p>
<p>Rinse, lather, repeat.</p>
<p>(Show with HW #4.)</p>
</div>
<div class="section">
<h2><a id="testing-and-debugging-the-1byte-examples" name="testing-and-debugging-the-1byte-examples">Testing and Debugging: the 1byte examples</a></h2>
<p>Pick a broken test.</p>
<p>Look at the line number of the traceback.</p>
<p>Try to understand the basics of what the test is asking.  <strong>Test code
should try to be simpler than &quot;real&quot; code</strong>.</p>
<p>Write &quot;stub&quot; code that passes that test, minimally; can hard code stuff.</p>
<p>Once the test is passing, refine your code to be more generally correct.</p>
</div>
<div class="section">
<h2><a id="the-essay-class-project-final-project" name="the-essay-class-project-final-project">The essay; class project; final project?</a></h2>
<p>I'm thinking of switching to one essay -- on multiprocessing,
handed out next week, outline due in three weeks, full essay due in
five? -- and a final project, which will involve adding one of a set
of features to the class project.</p>
<p>The class project: I'm thinking a new/better interface to the MSU
Personnel database, with a remote API, AJAX, tagging, better keyword
searching, etc.  Thoughts?</p>
<p>---</p>
<p><strong>Code review</strong></p>
</div>
</div>
<div class="section">
<h1><a id="web-programming-so-far" name="web-programming-so-far">Web programming, so far</a></h1>
<p>HTTP is client-server architecture.</p>
<p>Mostly we've been talking about server-side processing.</p>
<p>We will be talking about client-side work wrt JavaScript, in a few weeks.</p>
<p>Next few weeks will focus on <strong>serving actual content</strong>: HTML, data from
database.</p>
<p>Note, in abstract terms, HTTP provides a mechanism for content delivery,
with some (limited) metadata and some (limited) mechanisms of sending
information back from client to server.</p>
<p>Note: your options for sending information are limited! --</p>
<blockquote>
<ol class="arabic simple">
<li>url</li>
<li>GET and POST data</li>
<li>cookies</li>
</ol>
</blockquote>
<p>Synchronous, stateless conversation means that you don't need to retain
any state other than URL, GET, and cookies on the client side.
Browsers are now retaining form data as well.</p>
<p>Content-Type headers emitted by <em>server</em> tell <em>client</em> what to expect:</p>
<pre class="literal-block">
text/html
image/jpeg
text/plain
</pre>
<p>(These are generally &quot;MIME&quot; types, Multipurpose Internet Mail Extensions.)</p>
<p>How does the server know what content type to choose for each page??</p>
<p>Answer: it's up to the server.  For static files, here's a lookup table;
c.f. Apache and IIS Web servers, MIME types...</p>
<p>Other important HTTP trivia:</p>
<blockquote>
<ul>
<li><p class="first">404 pages to be returned if page does not exist; message can say whatever.</p>
</li>
<li><p class="first">30x redirects:</p>
<pre class="literal-block">
HTTP/1.0 301 Moved permanently
Location: http://some/other/URL
</pre>
</li>
</ul>
<p>301 is &quot;moved permanently&quot;
302 is &quot;moved temporarily&quot;</p>
</blockquote>
<p>Why redirect?</p>
<blockquote>
<ul>
<li><p class="first">First, obviously useful for reorganizing Web sites (this URL <em>was</em>
here... go here now)</p>
</li>
<li><p class="first">Second, think about reloads and POST data.:</p>
<p>On a reload after a POST, browsers will resend POST data.  This may
not be what you want... (&quot;buy a car&quot;, x 2!)</p>
<p>One technique for preventing this is to receive a POST, and then
(if successful) respond with a redirect.</p>
</li>
</ul>
</blockquote>
<p>---</p>
<div class="section">
<h2><a id="organizing-your-web-site" name="organizing-your-web-site">Organizing your Web site</a></h2>
<p>&quot;Literate&quot; URLs: the URLs should mean something.  (One reason to
use POSTs over GETs for transmitting info: info is not tacked onto
the end of a POST url.)</p>
<p>URLs work well hierarchically: think directory structure.</p>
<p>(This is less common now that most Web sites are dynamically generated.)</p>
<p>Hierarchical organization does have certain advantages; think about
a user forum site:</p>
<pre class="literal-block">
/forums/                    -- read-only accessible to all
/forums/&lt;forum name&gt;
/images                     -- commonly used images; cache, handle specially
/user/&lt;user name&gt;           -- accessible only to &lt;user&gt;
/admin/                     -- accessible only to administrative users
</pre>
<p>Cookies can be restricted to certain paths, too, so you can say things
like &quot;only send the admin cookie to the server when /admin/ is accessed&quot;.
Minor optimization, but it potentially makes things simpler.</p>
<p>More importantly, if your practice is to only put admin pages under /admin/,
and you slap access control on /admin/, then you never have to worry about
unauthorized access.  This kind of convention is an excellent way to
help keep your Web site secure.</p>
<p>Also, keeping things hierarchical means that you can delegate
responsibility for different sections of the site to different people
without worrying so much about crosstalk.  e.g.</p>
<blockquote>
<a class="reference" href="http://domain.com/~someuser/blah/">http://domain.com/~someuser/blah/</a></blockquote>
<p>Apache/IIS knows how to handle '~someuser' and you can restrict
permissions on a user-specific basis.</p>
<p>---</p>
</div>
<div class="section">
<h2><a id="data" name="data">Data</a></h2>
<p>So far, we've been mostly concerned with generating data in your Python code.</p>
<p>Next HW, serving <em>read-only</em> data from the file system.</p>
<p>After that, we'll talk about read-write data.  Once we can modify
data through the Web server, we have to worry about controlling
modification access -- both permissions and data integrity.</p>
<p>ACID: Atomicity; consistency; isolation; durability.</p>
<p>Standard example is bank account: how would you transfer money from
one account to another?</p>
<pre class="literal-block">
withdraw from account A
credit to account B
</pre>
<p>Atomicity:</p>
<pre class="literal-block">
withdraw from account A
&lt;power outage&gt;
</pre>
<p>Operations should be <em>grouped together</em> into a single transaction.</p>
<p>Consistency:</p>
<pre class="literal-block">
credit to acc&lt;power outage&gt;
</pre>
<p>What state is your account left in??  (consistency)</p>
<p>Isolation:</p>
<pre class="literal-block">
withdraw from account A
   &lt;someone else requests bank account info&gt;
credit to account B
</pre>
<p>Durability:</p>
<pre class="literal-block">
withdraw from account A
credit to account B
&lt;server dies&gt;
</pre>
<p>Think <em>session info</em>, e.g. a shopping cart &amp; purchasing...</p>
<p>Want to be able to check out the shopping cart <em>once</em>, and make sure
that (you've been charged AND the order goes through).</p>
</div>
</div>
</div>
</body>
</html>
