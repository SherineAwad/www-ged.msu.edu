<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.4: http://docutils.sourceforge.net/" />
<title>Lab 13 Material - November 13th, 2008</title>
<style type="text/css">

/*
:Author: David Goodger
:Contact: goodger@users.sourceforge.net
:Date: $Date: 2005-12-18 01:56:14 +0100 (Sun, 18 Dec 2005) $
:Revision: $Revision: 4224 $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin-left: 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left {
  clear: left }

img.align-right {
  clear: right }

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font-family: serif ;
  font-size: 100% }

pre.literal-block, pre.doctest-block {
  margin-left: 2em ;
  margin-right: 2em ;
  background-color: #eeeeee }

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

tt.docutils {
  background-color: #eeeeee }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document" id="lab-13-material-november-13th-2008">
<h1 class="title">Lab 13 Material - November 13th, 2008</h1>
<p>Reminder: office hours tonight, 9-11pm; hw due at 5pm on Friday.</p>
<p>---</p>
<p>Objective: expose you to jQuery and AJAX techniques.</p>
<p>Examples are in</p>
<blockquote>
<a class="reference" href="http://class.ged.idyll.org/svn/files/lab-13/">http://class.ged.idyll.org/svn/files/lab-13/</a></blockquote>
<div class="section">
<h1><a id="jquery-resources" name="jquery-resources">jQuery resources:</a></h1>
<p>jQuery docs:</p>
<blockquote>
<a class="reference" href="http://docs.jquery.com/Main_Page">http://docs.jquery.com/Main_Page</a></blockquote>
<p>15 Resources To Get You Started With jQuery From Scratch:</p>
<blockquote>
<a class="reference" href="http://nettuts.com/javascript-ajax/15-resources-to-get-you-started-with-jquery-from-scratch/">http://nettuts.com/javascript-ajax/15-resources-to-get-you-started-with-jquery-from-scratch/</a></blockquote>
<p>Easy AJAX with jQuery:</p>
<blockquote>
<a class="reference" href="http://www.sitepoint.com/article/ajax-jquery/">http://www.sitepoint.com/article/ajax-jquery/</a></blockquote>
<p>Learning jQuery in 30 minutes:</p>
<blockquote>
<a class="reference" href="http://www.slideshare.net/simon/learning-jquery-in-30-minutes">http://www.slideshare.net/simon/learning-jquery-in-30-minutes</a></blockquote>
<p>---</p>
</div>
<div class="section">
<h1><a id="what-is-jquery" name="what-is-jquery">What is jQuery?</a></h1>
<p>jQuery is a JavaScript library that contains a bunch of utility functions
to make writing JavaScript easier and <strong>cross-browser-compatible</strong>.</p>
<p>What you will find if you start writing complex JavaScript and CSS is
that support varies across browsers: IE is the most notorious, but
Firefox and Opera also have bugs in them and differences across versions.</p>
<p>(This is not much of an issue with server-side HTTP and HTML: every browser
interprets basic HTML and forms more-or-less properly.  Plus, you can use
your own language on the server side, which lets me use Python.)</p>
<p>You can think of jQuery as a <em>layer</em> on top of JavaScript that lets you
write JavaScript in a particular way, and provides a certain amount of
guarantee that as long as you write JS in that way it will work across
different browsers.</p>
<p>Below, I'll show you how to use jQuery to select and modify HTML elements
and also how to load data from an external server.</p>
</div>
<div class="section">
<h1><a id="jquery-basics" name="jquery-basics">jQuery Basics</a></h1>
<p>These are all equivalent ways of running code when the document has been
loaded.</p>
<pre class="literal-block">
jQuery(document).ready(function() {
  // Your code here
});
</pre>
<p>$ is assigned the jQuery object:</p>
<pre class="literal-block">
$(document).ready(function(){
  // Your code here
});
</pre>
<p>and, implicitly, calling '$' is the same as running code when the document is
loaded:</p>
<pre class="literal-block">
$(function() {
  // Your code here
});
</pre>
<p>(You want to do this because otherwise your JS is executed as the page is
loaded, so you have to place your JS <em>below</em> any HTML it operates on.)</p>
<p>The most common approach: find stuff, do stuff to it.</p>
</div>
<div class="section">
<h1><a id="css-selectors-and-modifying-elements" name="css-selectors-and-modifying-elements">CSS selectors and modifying elements</a></h1>
<p>Much of jQuery's up-front power lies in its CSS selector-like syntax:</p>
<pre class="literal-block">
&lt;style type=&quot;text/css&quot;&gt;
   a.test { font-weight: bold; }
&lt;/style&gt;

...

$(&quot;a&quot;).addClass(&quot;test&quot;);

$(&quot;a&quot;).removeClass(&quot;test&quot;);
</pre>
<p>Here, $(&quot;a&quot;) returns all links ('&lt;a ...&gt;' tags), and
addClass/removeClass is applied to the resulting collection.</p>
<p>Note, these CSS-selector-style expressions are cross-browser
compatible, unlike real CSS (hat tip to Taylor).</p>
<p>Modifying attributes is also easy:</p>
<pre class="literal-block">
&lt;a id=&quot;foo&quot; href='http://www.msu.edu/'&gt;MSU link&lt;/a&gt;

...

$(&quot;a#foo&quot;).attr({ 'href' : 'http://www.umich.edu' })
</pre>
<p>Also &quot;magic&quot; selectors and filters:</p>
<pre class="literal-block">
$(&quot;:even&quot;)
</pre>
<p>See <a class="reference" href="http://docs.jquery.com/Selectors">http://docs.jquery.com/Selectors</a>.</p>
</div>
<div class="section">
<h1><a id="chaining" name="chaining">Chaining</a></h1>
<p>By convention, each jQuery expression returns the object it worked on,
so you can do</p>
<pre class="literal-block">
$(&quot;a&quot;).addClass(&quot;test&quot;).html(&quot;foo&quot;)
</pre>
<p>to first add a class and then set the HTML content of all links ('a'
elements).  This is known as 'chaining'.</p>
</div>
<div class="section">
<h1><a id="collections" name="collections">Collections</a></h1>
<p>Collections let you iterate over them and &quot;do stuff&quot;, using 'each' with
a function argument:</p>
<pre class="literal-block">
$(&quot;div&quot;).each( function(id) {
   div = $(&quot;div&quot;).get(id);
}
</pre>
</div>
<div class="section">
<h1><a id="animation" name="animation">Animation</a></h1>
<p>jQuery effects:</p>
<pre class="literal-block">
$('h1').fadeOut(1000).slideDown()
</pre>
<p><a class="reference" href="http://docs.jquery.com/Effects">http://docs.jquery.com/Effects</a></p>
</div>
<div class="section">
<h1><a id="basic-ajax" name="basic-ajax">Basic AJAX</a></h1>
<p>Replace the element content with data loaded from a URL:</p>
<pre class="literal-block">
element.load(url)
</pre>
<p>or do a dynamic POST:</p>
<blockquote>
$.post(url, parameters, callback)</blockquote>
<p>where 'parameters' are the list of POST parameters to the url, and
'callback' is a function to be run against the returned data.</p>
</div>
<div class="section">
<h1><a id="some-jquery-philosophy" name="some-jquery-philosophy">Some jQuery philosophy</a></h1>
<p>Put all the JavaScript code &amp; references up top in the &lt;head&gt; header,
including 'onclick' assignments etc. For example, rather than putting
'onclick' in the HTML:</p>
<pre class="literal-block">
&lt;input type='submit' onclick='...'&gt;
</pre>
<p>assign based on ID:</p>
<pre class="literal-block">
$('#subme').click(...)

...

&lt;input type='submit' id='subme'&gt;
</pre>
<p>This unclutters your HTML and separates your behavior (JavaScript)
from your data (the HTML) and style (CSS).</p>
</div>
<div class="section">
<h1><a id="examples" name="examples">Examples</a></h1>
<p><a class="reference" href="ex1.html">example 1</a></p>
<p><a class="reference" href="ex2.html">example 2</a></p>
<p><a class="reference" href="ex3.html">example 3</a></p>
</div>
<div class="section">
<h1><a id="a-simple-quote-server" name="a-simple-quote-server">A Simple Quote Server</a></h1>
<p>Run the Web server in 'quotes':</p>
<pre class="literal-block">
python webserve.py 5000
</pre>
<p>and go to <a class="reference" href="http://localhost:5000/">http://localhost:5000/</a></p>
<p>Here, the frontend code in ('quotes/index.html') uses AJAX to call the
backend code and ask for data.  The backend code ('quotes/webserve.py')
returns whatever data it wants to.</p>
<p>Note that index2.html uses the 'ready' construct to put the JS code at the
top of the document; otherwise it's the same code.</p>
</div>
<div class="section">
<h1><a id="a-simple-chat-server" name="a-simple-chat-server">A Simple Chat Server</a></h1>
<p>Run the Web server in 'chat':</p>
<pre class="literal-block">
python webserve.py 5000
</pre>
<p>and go to <a class="reference" href="http://localhost:5000/">http://localhost:5000/</a></p>
<p>The backend code (in <a class="reference" href="chat/webserve.py">chat/webserve.py</a>)</p>
<blockquote>
<ul class="simple">
<li>keeps a simple database structure containing messages with a timestamp</li>
<li>provides functions to add a message, and retrieve messages that were
added after a certain point in time</li>
</ul>
</blockquote>
<p>The frontend code (in index.html)</p>
<blockquote>
<ul class="simple">
<li>uses AJAX to initialize the set of messages</li>
<li>adds and retrieves messages via AJAX on button clicks</li>
<li>uses CSS to make it pretty</li>
</ul>
</blockquote>
</div>
</div>
</body>
</html>
